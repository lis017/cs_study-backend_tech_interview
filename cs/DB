undo log
“Undo Log는 트랜잭션 롤백과 MVCC 구현을 위해 이전 버전을 저장하는 로그입니다.”

Redo Log는 복구용, Undo는 되돌리기용 (구분만 알면 충분)
--------------
isolation level
->serializable: 트랜잭션을 순차 실행한 것처럼 보이게 만드는 최고 격리 수준
Read Committed는 커밋된 데이터만 보장하고, Repeatable Read는 동일 트랜잭션 내 조회 일관성을 보장하며, Serializable은 팬텀까지 방지합니다.

Repeatable Read는 MVCC로 구현됩니다. Serializable은 범위 락을 사용합니다.

--------

MVCC란?
“여러 버전의 데이터를 유지해 락 없이 읽기 일관성을 보장하는 방식입니다.”
MVCC = 버전 기반 동시성 제어
읽기 시 락을 거의 안 건다
Repeatable Read는 MVCC 기반
Undo log로 이전 버전 관리 (MySQL InnoDB)

Inno db는 MVCC기반

--------

inverted index(full text index)가 b+tree(secondery index)보다 검색에 좋은 이유
->정확도 랭킹 제공(앞, 자주). 검색품질 좋음
->앞단어 아닐때도 이분탐색(빠름. 대용량 데이터에서 압도적 빠름

inverted index 특이점
-> 한글은 ngramparser쓰고
2음절씩 끊어서 저장.
-> 3글자든 긴 글자는 2글자의 조합으로 검색가능

QueryDSL?
->“QueryDSL은 JPA에서 사용하는 타입 안전한 쿼리 작성 라이브러리.
문자열로 작성하는 JPQL의 단점을 보완해서,
① 컴파일 타임 오류 검출
② 동적 쿼리 작성 용이
③ 가독성 높은 코드 기반의 쿼리 작성
을 가능하게 해줍니다.”

데이터베이스 제약조건에 대해 말해보라
-> db제약조건은 데이터 무결성을 유지하기 위해 컬럼이나 테이블에 적용하는 규칙.
->대표적으로는

PRIMARY KEY: 기본키, 중복 안 되고 NULL 불가

FOREIGN KEY: 다른 테이블의 키를 참조해 관계를 유지
테이블간 관계 보장
(제2정규화 같은거)

UNIQUE: 중복 불가

NOT NULL: 값이 반드시 있어야 함

CHECK: 값의 범위나 조건 제한
등이 있습니다.
이런 제약조건을 통해 잘못된 데이터 입력을 막고,
애플리케이션 레벨에서 오류를 줄일 수 있습니다.

B-Tree
자식이 2개가 아니라 여러 개
디스크 접근 최소화 목적(DB I/O 최소화)
한 노드에 여러 키 저장
트리 높이를 매우 낮게 유지

1️⃣ B-Tree vs B+Tree 차이
CS 분야: 자료구조 / DB
📌 B-Tree
모든 노드(중간 + 리프)에 데이터 저장 가능
리프 노드 연결 안 되어 있음
📌 B+Tree (InnoDB가 사용하는 구조)
실제 데이터는 리프 노드에만 저장
중간 노드는 “길 안내용 key”만 가짐
리프 노드끼리 연결 리스트로 이어짐
범위 조회에 유리합니다.”
--------------
db인덱스 특징
->이진탐색x B-tree탐색

db인덱스 단점
->조회 성능은 크게 향상시키지만, 그만큼 쓰기 연산 시 인덱스를 갱신해야 해서 오버헤드가 생기는 단점도 있습니다.”

인덱스 종류별 정리
Primary Index -> 자동생성, (Inno db기준)클러스터드 인덱스, 해당 row 실제데이터 전부저장(리프노드에)
Secondary Index -> (Inno db기준)해당값+pk값만 저장(리프노드에)
즉 조회가 2단계.
(오라클은 pk대신 row저장하며 조회 탐색 1번만함)

“커버링 인덱스는 쿼리에 필요한 컬럼이 모두 인덱스에 포함되어 있어 클러스터드 인덱스를 추가 탐색하지 않는 경우입니다.”

세컨더리 인덱스란?
-> PK(primary key)말고 다른컬럼으로 만든 인덱스. 
자주 사용되는 요소로 검색해서 검색속도향상
데이터뺴고 더할때, 인덱스 정렬때매 오버헤드 발생
->“세컨더리 인덱스는 리프 노드에 (인덱스컬럼 + PK)를 저장하며, 조회 시 PK로 클러스터드 인덱스를 한 번 더 탐색합니다.”

이 조건들을 종합적우로 판단하여 결정
✅ 인덱스 타는 조건
WHERE에 인덱스 컬럼 사용
=, >, <, BETWEEN
LIKE 'abc%' (앞 고정)
ORDER BY 인덱스 컬럼
복합 인덱스는 왼쪽부터 사용
❌ 인덱스 안 타는 경우
LIKE '%abc'
함수 사용 (WHERE UPPER(name))
컬럼 연산 (age + 1)
타입 불일치
복합 인덱스에서 앞 컬럼 없이 뒤 컬럼만 사용
-“인덱스를 사용할 수 있는 조건이라도 데이터 분포와 비용 계산에 따라 옵티마이저가 풀스캔을 선택할 수 있습니다.”

Inno db는
“InnoDB는 MySQL 계열 스토리지 엔진이며
 클러스터드 인덱스 이다.
B+트리를 사용한다

“InnoDB에서는 테이블 자체가 Primary Key 기준으로 정렬된 B+Tree 구조입니다.”

테이블이 따로 있고
인덱스가 따로 있는 구조가 아닙니다.
👉 Primary Key 인덱스의 리프 노드에
👉 실제 row 데이터가 저장됩니다.

클러스터드(Clustered)란?
데이터가 인덱스 기준으로 정렬되어 저장되는 구조
즉 인덱스 리프 노드 = 실제 데이터

클러스터드 인덱스란?
리프 노드에 실제 데이터 저장
Primary Key

Oracle 인덱스구조
-> B-tree

ORM이 뭐죠?
->sql안쓰고 db조작 가능하게.
->JPA

MyBatis란?
->개발자가 직접 SQL을 작성하고 그 결과를 객체에 매핑하는 SQL매퍼방식
->복잡한 쿼리와 성능최적화에 장점
->실무에선 단순한건 ORM. 복잡한건 MyBatis를 함께 사용하는경우 많음.

JPA장단점
->"JPA는 객체와 DB를 매핑해서 생산성과 유지보수를 크게 높여주지만,
복잡한 쿼리와 성능 최적화 면에서는 한계가 있어서
상황에 맞게 JPQL이나 QueryDSL, 혹은 MyBatis와 함께 사용하는 것이 좋다고 생각합니다."

트랜잭션에 대해서 설명해주세요.
-> 트랜잭션이란 데이터베이스의 상태를 변화시키는 하나의 논리적인 작업 단위
-> 트랜잭션은 수행중에 한 작업이라도 실패하면 전부 되돌림

트랜잭션 격리 수준(Transaction Isolation Levels)에 대해서 설명해주세요.
-> 트랜잭션 격리수준은 고립도와 성능의 트레이드 오프를 조절합니다.
//복습

정규화에 대해서 설명해주세요.
-> 정규화는 데이터의 중복방지, 무결성을 충족시키기 위해 데이터베이스를 설계하는 것
//복습

JOIN에 대해서 설명해주세요.
-> 조인은 두 개의 테이블을 서로 묶어서 하나의 결과를 만들어 내는 것
-> INNER JOIN(교집합 보여줌),
 OUTER JOIN(합집합 보여줌),
 CROSS JOIN(곱집합. 모든행 조합해서 보여줌),
 SELF JOIN(자기자신 조인. 계층,관계등 표현할때) 4가지가 있다.
//복습

RDBMS vs NOSQL에 대해서 설명해주세요.
-> RDBMS는 객체들의 릴레이션(관계)을 통해서 데이터를 저장하는 데이터베이스
-> 장점으로는 명확한 데이터 구조를 보장하고, 제약조건을 많이쓸수있다.
-> NOSQL은 RDBMS에 비해 자유로운 형태로 데이터를 저장합니다. 또한 수평확장이 용이
쇼핑몰 웹서비스에서 속도 중요한곳에 Redis를 함께써서 보조하는 형식이 자주 사용됨

Elasticsearch = 분산 기반 검색 엔진
Lucene 기반, 텍스트 검색·로그 분석·추천 검색에 최적화
강점: 전체 텍스트 검색, 자동완성, 오타 허용, 수평 확장
약점: RDB처럼 ACID 트랜잭션 강하지 않음, JVM 메모리 사용 많음

Elastic Search에 대해서 간단히 설명해주세요.
-> Elastic Search는 자바로 개발된 오픈소스 검색엔진 입니다. (db성질 조금 가지고있음)
  보통 단독으로 사용하기보다는 ELK 스택을 추가적으로 사용합니다.
//복습

Elastic Search의 인덱스구조와 RDBMS의 인덱스 구조의 차이에 대해 설명해주세요.
-> Elastic Search는 Inverted-Index 구조로 데이터를 저장합니다.
-> 특정 단어가 출현하는 doc을 저장하는 것입니다. 
-> 반면 RDBMS는 대부분 B-Tree와 그와 유사한 인덱스를 사용합니다.
-> “B-Tree는 하나의 노드에 여러 키를 저장해서 트리 높이를 낮추는 ‘균형 트리’입니다.
DB나 파일시스템에서 대용량 데이터를 빠르게 검색하기 위해 사용되고,
삽입·삭제·검색이 모두 O(log N)입니다.”
//복습

RDBMS의 LIKE검색이란?
-> “LIKE 검색은 문자열을 부분 일치로 찾는 SQL 연산자입니다.
->%와 _ 와일드카드를 사용하며, ‘%값%’ 형태는 인덱스를 못 써서 전체 스캔이 일어납니다.”

Elastic Search의 키워드 검색과 RDBMS의 LIKE 검색의 차이에 대해 설명해주세요.
-> Elastic Search의 키워드 검색은 랭킹알고리즘을 통해서 가장 유사한 순서대로 결과를 나타냅니다.
-> RDBMS에서의 LIKE 검색은 와일드카드로 시작하지 않을때만 인덱스를 사용하고 
-> 나머지 경우는 전체를 탐색하기 때문에 상대적으로 느립니다.
//복습

CAP 이론과, Eventual Consistency(궁극적 일관성)에 대해서 설명해주세요.
-> CAP 이론은 분산 환경에서 모두를 만족하는 시스템은 없다는 이론입니다..
-> Eventual Consistency는 Consistency(일관성)를 완전히 보장하지는 않지만, 결과적으로 언젠가는 Conssistency가 보장됨을 의미합니다.
//복습


















면접용x
  ORM 이란?
  -> 객체 관계 매핑(ORM)은 데이터베이스와 객체 지향 프로그래밍 언어 간의 호환되지 않는 데이터를 변환하는 프로그래밍 기법이다.
  ->간단하게 ‘백엔드 서버(WAS, Web Application Server)와 DB 서버간의 데이터 형변환’이라고 생각할 수 있겠다. 

  QueryDSL 이란?
  -> 타입 세이프한 SQL 쿼리형태를 자바 코드로 작성할 수 있게 해주는 프레임워크다.
  -> 주로 하이버네이트, JPA 같은 ORM 프레임워크와 함께 사용된다.
